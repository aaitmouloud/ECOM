<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"

      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:body>

        <ui:composition template="template/common/commonLayout.xhtml">
            <ui:define name="cssFiles">
                <h:outputStylesheet name="gamesList-style.css" library="css" />
            </ui:define>
            <ui:define name="content">
                <div id="contentGameList" >
                    <ui:include src="/template/common/commonMenu.xhtml" />
                    <h:outputScript library="js" name="gamelist.js" />
                    <div id="gameList">
                        <h1 id="jeuTitle" class="center">Jeux</h1>
                         <h:form>
                             <p:remoteCommand process="@this" update="@form" name="refreshGameList"></p:remoteCommand>
                        <table id="gameListTable">
                            <c:if test="#{aSearchBean.searching}">
                                <p:commandButton value="supprimer" action="#{aSearchBean.removeSearchTerm}" update="@form"></p:commandButton>
                                <h:outputText value="Résultat de la recherche: #{aSearchBean.searchTerm}"></h:outputText>
                            </c:if>
                            <tr><th>Jaquette</th><th>Nom</th><th>Annee</th><th>Note</th><th>Prix</th><th></th></tr>
                            <ui:repeat id="formListGame" value="#{aSearchBean.searchResult}" var="jeu">               
                                    <tr class='clickable-row' data-href='game.jsf?id=#{jeu.id}'>
                                        <td><div class="jaquetteJeu" style="background-image:url(#{jeu.image})"></div></td>
                                        <td>#{jeu.nom}<br/></td>
                                        <td>#{jeu.annee}</td>
                                        <td>*****</td>
                                        <td>#{jeu.currentPrix.prix}€</td>  
                                        <td><p:commandButton value="Ajouter au panier" action="#{panier.addGame(jeu)}"  /></td> <!--update=":panierDisplay:panierId"-->

                                    </tr>
                            </ui:repeat>
                            
                        </table>
                       </h:form>
                    </div>
                    <ui:include src="/template/common/commonPanier.xhtml" />
                </div>
            </ui:define>

        </ui:composition>

    </h:body>

</html>


